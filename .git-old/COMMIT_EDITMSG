Updated send & receive to receive message length first
